@{
    ViewData["Title"] = "Home Page";
}
@section scripts{
    <script>
        function joinGame() {
            let user1 = thisUserId
            let user2 = document.getElementById("usernameInput").value

            //get the game id
            $.post("/Home/GetGame?" + "userId1=" + user1 + "&userId2=" + user2, function (data) {
                let response = JSON.parse(data)

                let gameId = response.id

                //get the game page
                window.location.href = window.location.href + "Home/Game?id=" + gameId + "&player1Id=" + user1 + "&player2Id=" + user2;
            })

            
        }

        var thisUserId = 0;

        function googleSignIn() {
            //access google's oauth api to authenticate

            //look for the returned username in the database to get the user id

            //store id in variable

            //hide authentication div and show signed in div
            //document.getElementById("usernameSpan").innerHTML = "test"
            document.getElementById("signInDiv").style.visibility = "hidden"
            document.getElementById("authenticatedDiv").style.visibility = "visible"
        }
    </script>
}
@model ConnectionModel

<div class="text-center">

    <h1>Welcome to the home page!</h1>

    <!--
    <form>
        I am user <input type="number" placeholder="ID" id="user1"/> and I want to join a game with user 
        <input type="number" placeholder="ID" id="user2"/>.
        <br />
        <button type="button" onclick="joinGame()"}>Join</button>
    </form>
    -->

    <div id="signInDiv">
        <h2>Login is required to proceed:</h2>
        <button type="button" id="googleSignIn" onclick="googleSignIn()">Sign in with Google</button>
    </div>

    <div id="authenticatedDiv" style="visibility: hidden">
        <h2>You are signed in as <span id="usernameSpan"></span></h2>

        Create or join game with <input type="text" id="usernameInput" placeholder="Enter Google username" />
        <button type="button" onclick="joinGame()">Join</button>
    </div>


</div>